"use strict";(self.webpackChunkads_ui=self.webpackChunkads_ui||[]).push([[60],{49060:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var o=n(70655),i=n(93264),a=n.n(i),r=n(99922),c=n(49662),s=n(74515),d=n(39785),l=n(97263),u=n(10258),f=n.n(u),p=n(78788),m=function(e){return(0,p.Rb)(e.data)},g=function(e){return e.contentType===s.b.APPLICATION_YAML?"yaml":e.contentType===s.b.APPLICATION_XML||e.contentType===s.b.TEXT_XML||e.contentType===s.b.APPLICATION_WSDL?"xml":"json"},v=function(e){var t=e.content,n=e.onChange,o=m(t),r=g(t),c=(0,i.useState)(o),s=c[0],d=c[1],l=(0,i.useState)(r),u=l[0],p=l[1],v=(0,i.useRef)();return(0,i.useEffect)((function(){var e,n=m(t),o=g(t);d(n),p(o),v.current&&(null===(e=v.current)||void 0===e||e.setValue(n))}),[t]),a().createElement(f(),{className:"text-editor",language:u,value:s,onChange:n,options:{automaticLayout:!0,wordWrap:"on"},onMount:function(e,t){v.current=e}})},E=n(52212),y=function(e){var t=e.content,n=e.onChange,o=e.className,r=a().createRef(),c=(0,E.useConfig)();(0,i.useEffect)((function(){console.info("[OpenApiEditor] URL location of ads-editors: ",c.ads.editorsBasePath);var e=function(e){if(e.data&&"apicurio_onChange"===e.data.type){var o=e.data.data.content;"object"==typeof o?t.contentType===s.b.APPLICATION_YAML?(console.info("[OpenApiEditor] New content is 'object', converting to YAML string"),o=(0,p.vo)(o)):(console.info("[OpenApiEditor] New content is 'object', converting to JSON string"),o=(0,p.LQ)(o)):"string"==typeof o&&t.contentType===s.b.APPLICATION_YAML&&(console.info("[OpenApiEditor] Converting from JSON string to YAML string."),o=(0,p.vo)((0,p.Mo)(o))),n(o)}};return window.addEventListener("message",e,!1),function(){window.removeEventListener("message",e,!1)}}),[]);return a().createElement("iframe",{id:"openapi-editor-frame",ref:r,className:o||"editor-openapi-flex-container",onLoad:function(){var e;"object"==typeof t.data?(console.info("[OpenApiEditor] Loading editor data from 'object' - converting to JSON string."),e=(0,p.LQ)(t.data)):"string"==typeof t.data&&t.contentType===s.b.APPLICATION_YAML?(console.info("[OpenApiEditor] Loading editor data from 'string' - converting from YAML to JSON."),e=(0,p.LQ)((0,p.x1)(t.data))):(console.info("[OpenApiEditor] Loading editor data from 'string' without content conversion."),e=t.data);var n={type:"apicurio-editingInfo",data:{content:{type:"OPENAPI",value:e},features:{allowCustomValidations:!1,allowImports:!1}}};r.current.contentWindow.postMessage(n,"*")},src:c.ads.editorsBasePath})},A=function(e){var t=e.content,n=e.onChange,o=e.className,r=a().createRef(),c=(0,E.useConfig)();(0,i.useEffect)((function(){var e=function(e){if(e.data&&"apicurio_onChange"===e.data.type){var o=e.data.data.content;"object"==typeof o?t.contentType===s.b.APPLICATION_YAML?(console.info("[AsyncApiEditor] New content is 'object', converting to YAML string"),o=(0,p.vo)(o)):(console.info("[AsyncApiEditor] New content is 'object', converting to JSON string"),o=(0,p.LQ)(o)):"string"==typeof o&&t.contentType===s.b.APPLICATION_YAML&&(console.info("[AsyncApiEditor] Converting from JSON string to YAML string."),o=(0,p.vo)((0,p.Mo)(o))),n(o)}};return window.addEventListener("message",e,!1),function(){window.removeEventListener("message",e,!1)}}),[]);return a().createElement("iframe",{id:"asyncapi-editor-frame",ref:r,className:o||"editor-asyncapi-flex-container",onLoad:function(){var e;"object"==typeof t.data?(console.info("[AsyncApiEditor] Loading editor data from 'object' - converting to JSON string."),e=(0,p.LQ)(t.data)):"string"==typeof t.data&&t.contentType===s.b.APPLICATION_YAML?(console.info("[AsyncApiEditor] Loading editor data from 'string' - converting from YAML to JSON."),e=(0,p.LQ)((0,p.x1)(t.data))):(console.info("[AsyncApiEditor] Loading editor data from 'string' without content conversion."),e=t.data);var n={type:"apicurio-editingInfo",data:{content:{type:"ASYNCAPI",value:e},features:{allowCustomValidations:!1,allowImports:!1}}};r.current.contentWindow.postMessage(n,"*")},src:c.ads.editorsBasePath})},w=function(e){var t=e.content,n=e.onChange,o=m(t),r=(0,i.useState)(o),c=r[0],s=r[1],d=(0,i.useRef)();(0,i.useEffect)((function(){var e,n=m(t);s(n),d.current&&(null===(e=d.current)||void 0===e||e.setValue(n))}),[t]);return a().createElement(f(),{beforeMount:function(e){e.languages.register({id:"protobuf"}),e.languages.setMonarchTokensProvider("protobuf",{keywords:["import","option","message","package","service","optional","rpc","returns","return","true","false","required"],typeKeywords:["double","float","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64","bool","string","bytes"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"typeKeyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_$][\w$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}}),e.editor.defineTheme("protobuf",{base:"vs",inherit:!0,rules:[{token:"keyword",foreground:"DB2121"},{token:"typeKeyword",foreground:"F84842",fontStyle:"italic"},{token:"identifier",foreground:"0C5ED7",fontStyle:"bold"},{token:"type.identifier",foreground:"00CA8C",fontStyle:"bold"},{token:"comment",foreground:"7A7A7A"},{token:"number",foreground:"000000",fontStyle:"italic"},{token:"string",fontStyle:"italic"}]})},className:"text-editor",defaultLanguage:"protobuf",defaultValue:c,onChange:n,height:"100%",options:{automaticLayout:!0},onMount:function(e,t){d.current=e}})},C=n(68199),L=n(60891),h=function(e){e.preventDefault(),e.returnValue=""},b=function(e){var t=e.params,n=(0,i.useState)(!0),u=n[0],f=n[1],m=(0,i.useState)(),g=m[0],E=m[1],b=(0,i.useState)(),P=b[0],S=b[1],N=(0,i.useState)(),O=N[0],D=N[1],I=(0,i.useState)(!1),T=I[0],k=I[1],x=(0,i.useState)(),M=x[0],R=x[1],_=(0,i.useState)(),F=_[0],Y=_[1],j=(0,i.useState)(!1),B=j[0],J=j[1],V=(0,i.useState)(!1),$=V[0],z=V[1],Q=(0,i.useState)(!1),q=Q[0],U=Q[1],K=(0,i.useState)(!1),W=K[0],X=K[1],H=(0,i.useState)(!1),Z=H[0],G=H[1],ee=(0,i.useRef)(),te=(0,c.Pq)(),ne=(0,c.al)(),oe=(0,c.PB)(),ie=(0,L.H)(),ae=(0,c.qy)();(0,i.useEffect)((function(){return function(){window.removeEventListener("beforeunload",h)}}),[]),(0,i.useEffect)((function(){f(!0);var e=t.designId;te.getDesign(e).then((function(e){E(e)})).catch((function(t){console.error("[EditorPage] Failed to get design with id ".concat(e,": "),t)}))}),[t]),(0,i.useEffect)((function(){T?window.addEventListener("beforeunload",h):window.removeEventListener("beforeunload",h)}),[T]),(0,i.useEffect)((function(){var e=t.designId;te.getDesignContent(e).then((function(e){S(e),f(!1),k(!1),D(e.data)})).catch((function(t){console.error("[EditorPage] Failed to get design content with id ".concat(e,": "),t)}))}),[g]);var re,ce=function(e){D(e),k(!0)},se=function(){if(g&&P){var e="".concat((0,p.E2)(g.name),".").concat((0,p.Ft)(g,P)),t=(0,p.EC)(g,P),n="object"==typeof O?JSON.stringify(O,null,4):O;oe.downloadToFS(g,n,t,e)}},de=a().createElement(v,{content:P,onChange:ce}),le=a().createElement(w,{content:P,onChange:ce}),ue=a().createElement(y,{content:P,onChange:ce}),fe=a().createElement(A,{content:P,onChange:ce}),pe=function(e,t){console.log("".concat(t," has new width of: ").concat(e))},me=function(e,t,n){J(!0),ge(),Y({registry:e,groupId:t,artifactId:n}),ne.createFor(e).testUpdateArtifactContent(t,n,O).then((function(){})).catch((function(e){ge(e)}))},ge=function(e){z(!0),R(e),J(!1)},ve=function(){z(!1),J(!1),R(void 0)},Ee=function(e){var t;return B?a().createElement(r.Spinner,{className:"spinner"}):e?a().createElement(r.DescriptionList,{isHorizontal:!0},"RuleViolationException"===e.name&&(null===(t=e.causes)||void 0===t?void 0:t.length)>0?e.causes.map((function(e,t){return a().createElement(a().Fragment,{key:"issue-".concat(t)},a().createElement(r.DescriptionListGroup,null,a().createElement(r.DescriptionListTerm,null,"Code"),a().createElement(r.DescriptionListDescription,null,e.description),a().createElement(r.DescriptionListTerm,null,"Context"),a().createElement(r.DescriptionListDescription,null,a().createElement("pre",null,e.context))),a().createElement(r.Divider,null))})):a().createElement(r.CodeBlock,null,a().createElement(r.CodeBlockCode,{id:"code-content"},e.detail))):a().createElement("p",null,"Registry Test completed with no issues.")};return a().createElement(d.tr,{condition:u},a().createElement(r.PageSection,{variant:r.PageSectionVariants.light,id:"section-context"},a().createElement(l.rU,{design:g,dirty:T,onSave:function(){te.updateDesignContent((0,o.pi)((0,o.pi)({},P),{data:O})).then((function(){g&&(g.modifiedOn=new Date,E((0,o.pi)((0,o.pi)({},g),{modifiedOn:new Date})),S((0,o.pi)((0,o.pi)({},P),{data:O})),k(!1)),ae.designSaved(g)})).catch((function(e){console.error("[EditorPage] Failed to save design content: ",e)}))},onFormat:function(){console.info("[EditorPage] Formatting content.");var e=(0,p.Nq)(O,(null==P?void 0:P.contentType)||s.b.APPLICATION_JSON);console.info("[EditorPage] New content is: ",e),S((0,o.pi)((0,o.pi)({},P),{data:e})),D(e)},onDelete:function(){G(!0)},onDownload:se,onRename:function(){return U(!0)},isPanelOpen:$,onRegistrationTestRegistry:me,onCompareContent:function(){X(!0)},onExpandTestRegistryCausesPanel:function(e){return ge(e)},artifactContent:O})),a().createElement(r.PageSection,{variant:r.PageSectionVariants.light,id:"section-editor"},a().createElement(r.Drawer,{isExpanded:$,isInline:!0,position:"right"},a().createElement(r.DrawerContent,{panelContent:(re=M,a().createElement(r.DrawerPanelContent,{isResizable:!0,onResize:pe,minSize:"35%",id:"test-registry-issues-panel"},a().createElement(r.DrawerHead,null,a().createElement("h2",{className:"pf-c-title pf-m-2xl",tabIndex:$?0:-1,ref:ee},"Test Registration issues"),a().createElement(r.DrawerActions,null,a().createElement(r.Button,{variant:"secondary",onClick:function(){return me(null==F?void 0:F.registry,null==F?void 0:F.groupId,null==F?void 0:F.artifactId)}},"Retry"),a().createElement(r.DrawerCloseButton,{onClick:ve}))),a().createElement(r.Divider,null),a().createElement(r.DrawerPanelBody,null,Ee(re))))},a().createElement("div",{className:"editor-parent"},(null==g?void 0:g.type)===s.R.OPENAPI?ue:(null==g?void 0:g.type)===s.R.ASYNCAPI?fe:(null==g?void 0:g.type)===s.R.PROTOBUF?le:de)))),a().createElement(l.h5,{isOpen:W,onClose:function(){X(!1)},before:null==P?void 0:P.data,beforeName:(null==g?void 0:g.name)||"",after:O,afterName:(null==g?void 0:g.name)||""}),a().createElement(l.tt,{design:g,isOpen:q,onRename:function(e){te.renameDesign(null==g?void 0:g.id,e.name,e.summary).then((function(){g&&(g.name=e.name,g.summary=e.summary),U(!1),ae.designRenamed(e)})).catch((function(e){}))},onCancel:function(){return U(!1)}}),a().createElement(l.Qt,{design:g,isOpen:Z,onDelete:function(e){te.deleteDesign(e.id).then((function(){ae.designDeleted(e),ie.navigateTo("/")})).catch((function(t){console.error("[Editor] Design delete failed: ",t),ae.designDeleteFailed(e,t)})),G(!1)},onDownload:se,onCancel:function(){return G(!1)}}),a().createElement(C.Prompt,{when:T,message:"You have unsaved changes.  Do you really want to leave?"}))};const P=function(e){return a().createElement(b,(0,o.pi)({},e))}}}]);
//# sourceMappingURL=60.eb825919.js.map